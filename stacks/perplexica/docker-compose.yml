# Perplexica - Privacy-focused AI-powered answering engine
# Includes bundled SearxNG search engine. No host ports: access via Caddy (perplexica.home / perplexica.bolens.dev on monitor network).
services:
  perplexica:
    image: itzcrazykns1337/perplexica:latest
    container_name: perplexica
    restart: unless-stopped
    volumes:
      - perplexica_data:/home/perplexica/data
    extra_hosts:
      - "host.docker.internal:host-gateway"
    networks:
      - default
      - monitor
    environment:
      - TZ=${TZ:-America/Denver}
      - LANG=${LANG:-en_US.UTF-8}
      - LC_ALL=${LC_ALL:-en_US.UTF-8}
      - LC_CTYPE=${LC_CTYPE:-en_US.UTF-8}
      # SearxNG URL (if using external SearxNG instance)
      # Leave empty to use bundled SearxNG
      - SEARXNG_API_URL=${SEARXNG_API_URL:-}
      # Ollama Configuration
      - OLLAMA_BASE_URL=${OLLAMA_BASE_URL:-http://host.docker.internal:11434}

networks:
  monitor:
    name: monitor
    external: true

volumes:
  perplexica_data:
    driver: local
